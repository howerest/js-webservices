/*! js-webservices 0.5.0 | howerest 2016 - <davidvalin@howerest.com> | Apache 2.0 Licensed */
var Util;!function(a){var b=function(){function a(){}return a.isBrowser=function(){return"undefined"!=typeof window},a.isNode=function(){return"undefined"!=typeof process&&"undefined"!=typeof process.env&&"undefined"!=typeof global?!0:!1},a.nodeVersion=function(){},a}();a.EnvChecker=b;var c=function(){function a(){}return a.obj=function(a){var b=this;return function(a){if(null===a||"object"!=typeof a)return function(a){return a}(a);var c=a.constructor();for(var d in a)a.hasOwnProperty(d)&&(a[d]instanceof Object?c[d]=b.obj(a[d]):c[d]=a[d]);return c}(a)},a}();a.Cloner=c;var d=function(){function a(){}return a.camelize=function(a){return this.walk(a)},a.walk=function(a){var b=this;return this.reduce(Object.keys(a),function(c,d){var e=b.camelCase(d);return c[e]=b.walk(a[d]),c},{})},a.camelCase=function(a){return a.replace(/[_.-](\w|$)/g,function(a,b){return b.toUpperCase()})},a.reduce=function(a,b,c){if(a.reduce)return a.reduce(b,c);for(var d=0;d<a.length;d++)c=b(c,a[d],d);return c},a.map=function(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c},a}();a.Camel=d}(Util||(Util={}));var WebServices;!function(a){var b=function(){function a(a){this.name=Object.keys(a)[0],this.value=a[Object.keys(a)[0]]}return a}();a.HttpHeader=b;var c=function(){function a(a){this.response=null,this.query=a;var b=this;if(Util.EnvChecker.isBrowser())if("undefined"!=typeof c)this.client=new c;else{if("undefined"==typeof XDomainRequest)return;this.client=new XDomainRequest}else{if(!Util.EnvChecker.isNode())return;var c=require("xhr2");this.client=new c}this.client.open(this.query.httpMethod,this.query.endpoint);for(var e in this.query.headers)this.client.setRequestHeader(e,this.query.headers[e]);this.client.setRequestHeader("Accept","application/json"),this.promise=new Promise(function(a,c){this.client.onreadystatechange=function(c){c&&4==c.target.readyState?200==c.target.status&&(b.response=new d(this.endpoint,{},c.target.responseText),a(b.response)):(b.promise=Promise.reject(!1),a({}))}}),this.client.send(this.query.data?JSON.stringify(this.query.data):null)}return a}();a.HttpRequest=c;var d=function(){function a(a,b,c,d){void 0===d&&(d=!0),this.data=Object.keys(c).length>0?JSON.parse(c):{}}return a}();a.HttpResponse=d;var e=function(){function a(a){this.httpMethod="GET",this.qsParams={},this.headers=[],this.data={},this.endpoint=a.endpoint,this.httpMethod=a.httpMethod,this.qsParams=a.qsParams,this.headers=a.headers,this.data=a.data}return a.prototype.where=function(a){void 0===a&&(a=this.qsParams);for(var b in a)a.hasOwnProperty(b)&&(this.qsParams[b]=a[b]);return this},a.prototype.withHeaders=function(a){void 0===a&&(a=[]),this.headers=a},a.prototype.withData=function(a){void 0===a&&(a={}),this.data=a},a.prototype.qsParamsToString=function(a){return void 0===a&&(a=this.qsParams),this.serialize(a)},a.prototype.serialize=function(a){var b=[];for(var c in a){var d=a[c];b.push("object"==typeof d?this.serialize(d):encodeURIComponent(c)+"="+encodeURIComponent(d))}return b.join("&")},a}();a.HttpQuery=e}(WebServices||(WebServices={}));